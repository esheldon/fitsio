--- cfitsio-4.2.0/configure.ac	2022-10-31 14:40:23.000000000 -0400
+++ cfitsio-4.2.0/configure.ac	2023-07-14 11:45:00.797390794 -0400
@@ -53,6 +53,12 @@
   [ if test $enableval = yes; then SSE_FLAGS="$SSE_FLAGS -mssse3"; fi ]
 )
 
+AC_ARG_ENABLE(
+  standard_strings,
+  [AS_HELP_STRING([--enable-standard-strings],[Enable use of FITSIO standard string processing])],
+  [ if test $enableval = yes; then USE_STANDARD_STRINGS=yes; fi ]
+)
+
 SYMBOLS=""
 AC_ARG_ENABLE(
   symbols,
@@ -71,6 +77,13 @@
   AC_DEFINE(BUILD_HERA)
 fi
 
+# ------------------------------------------------------------------------------
+# Define FITS_USE_STANDARD_STRINGS
+# ------------------------------------------------------------------------------
+if test "x$USE_STANDARD_STRINGS" = xyes; then
+  AC_DEFINE(FITS_USE_STANDARD_STRINGS)
+fi
+
 # Optional support for bzip2 compression:
 AC_ARG_WITH(
   bzip2,
@@ -170,11 +170,16 @@ AC_ARG_WITH(
   [AS_HELP_STRING([--with-bzip2[[=PATH]]],[Enable bzip2 support. Optional path to the location of include/bzlib.h and lib/libbz2])],
   [ if test "x$withval" != "xno"; then
         if test "x$withval" = "xyes" ; then
-            AC_CHECK_LIB([bz2],[main],[],[AC_MSG_ERROR(Unable to locate bz2 library needed when enabling bzip2 support; try specifying the path)])
+            AC_CHECK_LIB(
+              [bz2],
+              [main],
+              [LIBS="$LIBS -lbz2"; AC_DEFINE(HAVE_LIBBZ2) AC_CHECK_HEADERS(bzlib.h,[AC_DEFINE(HAVE_BZIP2,1,[Define if you want bzip2 read support])])],
+              []
+            )
         else
             BZIP2_PATH="${withval}"
+            AC_CHECK_HEADERS(bzlib.h,[AC_DEFINE(HAVE_BZIP2,1,[Define if you want bzip2 read support])])
         fi
-        AC_CHECK_HEADERS(bzlib.h,[AC_DEFINE(HAVE_BZIP2,1,[Define if you want bzip2 read support])])
     fi
   ]
 )
